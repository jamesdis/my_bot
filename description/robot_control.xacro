<?xml version="1.0"?>

<!-- Cáº¥u hÃ¬nh plugin DK Ä‘á»ƒ robot cÃ³ thá»ƒ nháº­n lá»‡nh tá»‘c Ä‘á»™ tá»« ROS vÃ  di chuyá»ƒn Ä‘Æ°á»£c trong Gazebo. -->


<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

    <gazebo>
        

        <!-- Plugin DK chuyá»ƒn Ä‘á»™ng 2 bÃ¡nh (differential drive) -->
        <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">

            <!-- ðŸ›ž ThÃ´ng tin bÃ¡nh xe -->

            <left_joint>left_wheel_joint</left_joint>
            <right_joint>right_wheel_joint</right_joint>

            <!-- Khoáº£ng cÃ¡ch giá»¯a hai bÃ¡nh -->
            <wheel_separation>0.35</wheel_separation>

            <!-- ÄÆ°á»ng kÃ­nh bÃ¡nh xe, trong file robot_core.xacro R = 0.05-->
            <wheel_diameter>0.1</wheel_diameter>


            <!-- mÃ´-men xoáº¯n cá»±c Ä‘áº¡i-->
            <!-- áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n kháº£ nÄƒng tÄƒng tá»‘c hoáº·c vÆ°á»£t chÆ°á»›ng ngáº¡i cá»§a robot -->
            <!-- quÃ¡ tháº¥p â†’ robot di chuyá»ƒn cháº­m, quÃ¡ cao â†’ robot pháº£n á»©ng quÃ¡ máº¡n --> 
            <max_wheel_torque>200</max_wheel_torque>

            <!-- gia tá»‘c gÃ³c cá»±c Ä‘áº¡i -->
            <!-- Náº¿u quÃ¡ tháº¥p â†’ robot khá»Ÿi Ä‘á»™ng/Ä‘á»•i hÆ°á»›ng ráº¥t cháº­m. -->
            <!-- Náº¿u quÃ¡ cao â†’ robot khá»Ÿi Ä‘á»™ng/Ä‘á»•i hÆ°á»›ng ráº¥t nhanh-->
            <max_wheel_acceleration>10.0</max_wheel_acceleration>

            <!-- ðŸ§­ Cáº¥u hÃ¬nh Ä‘áº§u ra (Output settings) -->

            <!-- Frame gá»‘c cá»§a real world, giá»‘ng nhÆ° Ä‘iá»ƒm (0,0) trÃªn Google Maps -->
            <!-- Robot sáº½ tÃ­nh toÃ¡n vá»‹ trÃ­ so vá»›i gá»‘c nÃ y -->
            <odometry_frame>odom</odometry_frame>

            <!-- Frame gá»‘c cá»§a robot trong thÃ© giá»›i mÃ´ phá»ng ( tháº¿ giá»›i cá»§a robot) -->
            <robot_base_frame>base_link</robot_base_frame>

            <!-- xuáº¥t báº£n thÃ´ng tin vá»‹ trÃ­ (x, y), hÆ°á»›ng xoay, vÃ  váº­n tá»‘c hiá»‡n táº¡i cá»§a robot ra topic /odom.-->
            <!-- Giá»‘ng nhÆ° báº¡n Ä‘ang má»Ÿ á»©ng dá»¥ng báº£n Ä‘á»“ vÃ  tháº¥y: "Xe báº¡n Ä‘ang á»Ÿ vá»‹ trÃ­ (2.0, 1.0), Ä‘ang di chuyá»ƒn vá»›i tá»‘c Ä‘á»™ 0.3 m/s vá» phÃ­a trÆ°á»›c". -->
            <publish_odom>true</publish_odom>

            <!-- phÃ¡t TF (transform) giá»¯a 2 khung tá»a Ä‘á»™ odom (real world) vs base_link (robot world)-->
            <!-- Giá»‘ng nhÆ° biáº¿t ráº±ng: "Robot Ä‘ang á»Ÿ (x=2m, y=1m), quay 15 Ä‘á»™ so vá»›i vá»‹ trÃ­ gá»‘c (0.0) trong real world" -->
            <publish_odom_tf>true</publish_odom_tf>

            <!-- ðŸ›ž Xuáº¥t TF (transform) tá»« base_link â†’ cÃ¡c bÃ¡nh xe -->
            <!-- Trong Google Maps, báº¡n khÃ´ng chá»‰ biáº¿t xe á»Ÿ Ä‘Ã¢u, mÃ  cÃ²n biáº¿t:
                - "BÃ¡nh trÃ¡i Ä‘ang quay tá»›i Ä‘Ã¢u?"
                - "BÃ¡nh pháº£i Ä‘ang quay nhanh hÆ¡n hay cháº­m hÆ¡n?" -->
            <publish_wheel_tf>true</publish_wheel_tf>

        </plugin>
        
  </gazebo>

</robot>
